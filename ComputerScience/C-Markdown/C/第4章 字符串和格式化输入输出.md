## 4.1 字符串

字符串是一个或多个字符的序列，如："Hello World!"

C语言没有专门用于储存字符串的变量类型，字符串都被储存在char类型的数组中。数组由连续的储存单元组成，C语言用\0标记字符串的结束。\0是空字符，为非打印字符，其ASCII码是0；

**这意味着数组的容量必须比待储存字符串中的字符数多1**；

 

##### 4.1.1 使用字符串

```c
#include <stdio.h>
#include<string.h> //提供strcmp函数原型s
int main()
{
	char name[40];
	printf("你的名字？");
	scanf("%s",name); //数组本身的名字代表其地址，也代表其数组首地址：name[0]
	printf("你的性别？");
	char gender[3];
	scanf("%s",gender);
	
	if( strcmp(gender,"男") == 0 ){  //如果两个字符串完全相等，则返回0，
		printf("好的，%s大帅哥",name);
	}
	else if( strcmp(gender,"女") == 0){
		printf("好的，%s大美女",name);
	}else{
		printf("好吧，性别不详的%s",name);
	}
}

```

**字符串和字符**

字符串常量"x"和字符常量'x'不同，区别在于'x'是基本类型(char)，而"x"是派生类型（char数组），其二是"x"实际上是由'x'和空字符\0组成



##### 4.1.2 strlen()函数

strlen()可以给出字符串的字符长度，要想使用strlen()函数，必须先包含<string.h>头文件，也就是#include<string.h>

```c
#include <stdio.h>
#include<string.h> //提供strlen()数原型
int main()
{
	char str[20]="Hello";
	printf("字符串%s的长度为%d",str,strlen(str));
}
```

将输出字符串Hello的长度为5，**空字符不计入计算**；





## 4.2常量和C预处理器

对于一些固定的值，我们可以使用常量储存它，在C语言中可以用#define定义符号常量

```
#define TAX 0.15
```

这样就定义了一个值为0.15的常量TAX，实际上，当后面的程序遇到TAX这个常量时，会把TAX替换为0.15；

注意，末尾不加分号，用大写表示符号常量是C语言一贯的传统，在程序中看到全大写的名称就应该立刻明白这是一个符号常量

输入的内容

```55
#define TAX 0.15
int main()
{
.
.
.
bill=TAX*0.5;
.
.
.
}
```

预处理所作的工作

```
int main()
{
.
.
.
bill=0.15*0.5;
.
.
.
}
```





##### 4.2.1 const 限定符

const用于限定一个变量为只读， 其声明如下：

const int MONTH=12; //不可更改



##### 4.2.2 limits.h头文件和float.h文件

limits.h头文件中定义了一些数据类型的最大值和最小值，如

CHAR_MAX:char类型的最大值

CHAR_MIN:char类型的最小值



类似的float.h头文件中也定义了一些常量，如FLO_DIG和DBL_DIG,分别表示float和double类型的有效数字位。





## 4.3printf()和scanf()  

printf()函数和scanf（）函数为输出\输入函数，或**简称I/O函数**。



##### 4.3.1 printf()函数

使用printf()函数打印数据的指令要与待打印数据的类型相匹配。如，打印整数用%d，打印字符用%c；

下面是常用的转换说明

| 转换说明   | 输出                                                       |
| ---------- | ---------------------------------------------------------- |
| %a %A      | 浮点数、十六进制数和p计数法                                |
| **%c**     | 单个字符                                                   |
| **%d**     | 有符号十进制整数                                           |
| %e %E      | 浮点数，e计数法                                            |
| %f **%lf** | 浮点数（十进制计数法）                                     |
| %g %G      | 根据值的不同，自动选择%f或%e用于指数小于-4或大于等于精度时 |
| %i         | 有符号十进制整数（与%d相同）                               |
| **%o**     | 无符号八进制整数                                           |
| **%p**     | 指针                                                       |
| **%s**     | 字符串                                                     |
| %u         | 无符号十进制整数                                           |
| **%x  %X** | 无符号十六进制整数                                         |
| **%%**     | 打印一个%                                                  |



 #####  4.3.2pirntf()函数的转换说明修饰符

| 修饰符 | 含义                                                         |
| ------ | ------------------------------------------------------------ |
| 标记   | 可以不使用标记或使用多个标记，详情见下一个表4.2.4，例如："%-10d"; |
| 数字   | 最小字段宽度，例如："%4d"；如果待字段不能容纳待打印的数字或字符串，系统会使用更宽的字段 |
| .数字  | 精度<br />对于浮点数%e 、%E和%f %lf转换，代表小数点右边数字的位数<br />对于%s转换，表示待打印字符的最大数量<br />对于%d转换，表示待打印数字的最小位数，如有必要，使用前导0来达到这个位数<br />只使用 . 表示其后跟随一个0，所以%.f和%.0f相同<br />示例："%5.2f"打印一个浮点数，字段宽度为5，其中小数点后有两位数字； |
| h      | 和整型转换说明一切使用，表示short int 或 unsigned short int 的值 |
| z      | 和整型转换说明一起使用，表示size_t的值。size_t是sizeof()的返回类型<br />示例："%zd","%zu"; |

各个转换说明可以合理组合修饰符，如"%zu"代表无符号十进制数的size_t类型，"%zd"代表有符号十进制数的size_t类型

| 标记 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| -    | 待打印项左对齐。即，从字段的左侧开始打印该项<br />示例："%-20s" |
| +    | 有符号值若为正，则在值前面显示+号，若为负，则在该值前面显示-号 |
| 空格 | 有符号若为正，则在值前面显示前导空格（不显示任何符合）；若为负，则在值前面显示-号标记并覆盖空格<br />示例："% 6.2f" |
| 0    | 对于数值格式，用前导0代替空格填充字段宽度。                  |



##### 4.3.3printf()函数的返回值

printf()函数有一个返回值，它会返回打印字符的个数。如果有输出错误，printf()则返回一个负值

```
int main() {
	char str[20] = "My Home";
	int len = printf("%s", str);
	printf("\n%d", len); //输出7
}
```





### 4.3.4 scanf()

scanf可以输入中读取数据，当你键入2025时，实际上是输入了2、0、2、5，四个字符，scanf要做的就是把这四个字符转换为对应的数据类型，如整数；printf()则相反，它的工作是把各种基本数据类型转换为文字输出到屏幕上；

使用scanf和使用printf类似，占位符类型都需要和变量匹配，使用scanf需要记住两条规则：

1. 如果使用scanf()读取基本变量类型的值，在变量名上加上一个**&**(取地址符)
2. 如果使用scanf()把字符串读入字符数组中，不要使用&



##### 4.3.5 scanf()的特性

1. scanf读取数字时，会跳过所有空格输入，当它识别到一个数字字符后，开始读取，直到遇见非数字字符后停止读取；

   ```
   #include<stdio.h>
   int main() {
   	int ab;
   	scanf("%d", &ab);
   	printf("ab的值为:%d", ab);
   	return 0;
   }
   
   //当你输入：     86145     
   //程序只会输出：86145
   ```

   

2. 如果使用%s转换说明，scanf（）会读取除空格以外的所有字符，开始读取，直到遇见空格后停止读取。也就是%s只能读取一个单词

   ```
   #include<stdio.h>
   int main() {
   	char name[40];
   	scanf_s("%s",name);
   	printf("%s",name);
   	return 0;
   }
   //当你输入：  tian wei wei
   //程序只会输出：tian
   ```

   

3. 当读取的类型不匹配，如转换说明是%d，遇到的字符却是A，则A会被放到输入中，等待下一个转换说明，如果scanf中没有转换说明，程序将停止输入

   ```
   #include<stdio.h>
   int main() {
   	int a;
   	scanf("%d ",&a);
   	printf("a的值:%d",a);
   }
   //当你输入字母:A;
   //程序会输出一个随机的值，这说明字符A并没有被读取到变量a中
   //请尽量避免这种情况发生
   ```



##### 4.3.6格式字符串中的普通字符

scanf()允许把普通字符放入格式字符串中，除空格字符外的普通字符必须与输入字符串严格匹配。如

```	
scanf("%d,%d",&n,&m);
```

则必须这样输入：88,99;

```
scanf("%d%d",&a,&b)
scanf("%d %d",&a,&b)
```

两条语句本质上没有区别，因为除了%c，其他转换说明都会跳过带输入值前面所有的空白。

```
scanf("%c",&ch)//从第一个字符开始读取，不会跳过空格
```



#### 4.3.7 scanf()函数的返回值

同样的scanf()也会有返回值，它会返回已成功赋值的数据项数，出错时则返回EOF（在文件输入输出章节详细介绍）

```
int a;
int b;
int c =scanf("%d %d",&a,&b);
```

如果输入成功，那么c的值则为2，我们可以利用这一特点去判断scanf()是否输入成功，

```
while(scanf("%d",&a)==1){
	语句
}
```

如果成功输入，就执行循环里的语句。如果输入失败，则不执行里面的语句



## 4.4 printf()和scanf()的*修饰符

如果不想预先指定字段宽度，希望通过程序来指定，可以使用*修饰符代替字段宽度，但还是需要一个参数告诉函数，字段宽度是多少

。如果转换说明是%*d，那么参数列表中应包含\*和d对应的值



##### 4.4.1printf()

```
#include<stdio.h>
int main() {
	int value =256;
	int weight;
	printf("你希望这个变量占多少个宽度：");
	scanf("%d",&weight);
	printf("value:%*d", weight, value);
}

当你输入：6
输出结果为：
你希望这个变量占多少个宽度：6
value:   256
```



##### 4.4.2scanf()

scanf()中的*用法与此不同，把\*放在%和转换字符之间时，会使得scanf（）跳过相应的输入项；

```
#include<stdio.h>
int main() {
	int n = 0;
	printf("请你输入三个数字：");
	scanf("%*d %*d %d", &n);
	printf("最后的结果是：%d",n);
}
输入：2014 2015 2016
输出：2016
```



## 4.5scanf()的转换说明与修饰符

| 转换说明       | 含义                                                         |
| -------------- | ------------------------------------------------------------ |
| %c             | 把输入解释成字符                                             |
| %d             | 把输入解释成有符号十进制整数                                 |
| %e、%f、%g、%a | 把输入解释成浮点数                                           |
| %i             | 把输入解释成有符号十进制整数                                 |
| %o             | 把输入解释成有符号八进制整数                                 |
| %p             | 把输入解释成指针（地址）                                     |
| %s             | 把输入解释成字符串                                           |
| %u             | 把输入解释成无符号十进制整数                                 |
| %x、%X         | 把输入解释成有符号十六进制整数                               |
| *              | 抑制赋值<br />示例："%*d"                                    |
| 数字           | 最大字段宽度。输入达到最大字段宽度时停止。或第一次遇到空白字符时停止 |





## 4.8 编程练习

1. 编写一个程序，提示用户输入名和姓，然后以"名，姓"的格式打印出来

   ```
   
   ```

2. 编写一个程序，提示用户输入两个整数，然后输出该两数之和

   ```
   ```

3. 编写一个程序，提示用户输入身高（单位:cm)，和姓名，然后输出姓名和身高，举例：

   输入身高，175

   输入姓名：田某

   输出：

   田某，你的身高是1.75米；

   ```
   ```

   
